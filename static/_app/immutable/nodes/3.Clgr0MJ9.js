import"../chunks/DsnmJJEf.js";import{i as U}from"../chunks/Sv-gjAt2.js";import{o as V}from"../chunks/x8l3Iqzx.js";import{a7 as Z,a8 as q,a9 as B,aa as u,ab as p,ac as F,z as a,L as n,ae as G,af as m,ag as K,ad as v,ah as r,aj as d,u as b,b as j,ak as N}from"../chunks/DrX3vYwl.js";import{i as g}from"../chunks/B5C7Kgw-.js";import{e as P,i as Q}from"../chunks/ClDOU8as.js";import{r as S,s as $}from"../chunks/HYIMj859.js";import{b as R}from"../chunks/B_3nRxth.js";import{c as W}from"../chunks/BnU6kSi0.js";var aa=u('<div class="loading svelte-9c3fts">جاري التحميل...</div>'),ea=u('<div class="error svelte-9c3fts"> </div>'),sa=u('<div class="no-results svelte-9c3fts">لا يوجد نتائج</div>'),ra=u('<a class="card"><h3 class="grid-one-poets"><p class="card-name"> </p></h3></a>'),ta=u('<ul class="menu"><li><a class="home" href="/">الرئيسيه</a></li> <li><a class="home" href="#">المعصومين</a></li> <li><a class="home" href="/poets">الشعراء</a></li> <li><a class="home" href="#">الغرض</a></li></ul> <div class="title"><title class="title-bar">aldiwan</title> <h1 class="main-title">الديـــوان الحسيني</h1></div> <div class="search-grid"><input class="searching" type="text" placeholder="ابحث عن شاعر..."/></div> <!> <!> <!> <div class="card-grid"></div>',1);function ha(O,E){Z(E,!1);const I=n(),y=W("https://npllhpweugxvzjpprlxt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5wbGxocHdldWd4dnpqcHBybHh0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIxOTQzMTksImV4cCI6MjA2Nzc3MDMxOX0.CcbMCL0izYcmukksNl04juV_dEPd-rDcDsNrzJEdrCY");let t=n(""),i=n([]),o=n(!1),l=n(""),x,f=n([]);V(async()=>{r(o,!0);const{data:e,error:s}=await y.from("poet").select("id, poet_name, slug").order("id");s||!e?(r(l,"فشل تحميل الشعراء"),r(f,[]),console.error(s)):r(f,e),r(o,!1)});function X(){if(clearTimeout(x),a(t).trim().length<2){r(i,[]);return}x=setTimeout(()=>{Y()},300)}async function Y(){if(!a(t).trim()){r(i,[]);return}r(o,!0),r(l,"");try{const{data:e,error:s}=await y.from("poet").select("id, poet_name, slug").ilike("poet_name",`%${a(t)}%`);s?(r(l,"فشل البحث"),console.error(s)):r(i,e??[])}catch(e){console.error("Exception during search:",e),r(l,"حدث خطأ في البحث")}finally{r(o,!1)}}q(()=>(a(t),a(i),a(f)),()=>{r(I,a(t).trim()?a(i):a(f))}),B(),U();var z=ta(),h=p(F(z),4),_=v(h);S(_),d(h);var k=p(h,2);{var A=e=>{var s=aa();m(e,s)};g(k,e=>{a(o)&&e(A)})}var C=p(k,2);{var D=e=>{var s=ea(),c=v(s,!0);d(s),j(()=>N(c,a(l))),m(e,s)};g(C,e=>{a(l)&&e(D)})}var J=p(C,2);{var H=e=>{var s=sa();m(e,s)};g(J,e=>{a(t),a(i),a(o),b(()=>a(t).trim()&&a(i).length===0&&!a(o))&&e(H)})}var M=p(J,2);P(M,5,()=>a(I),Q,(e,s)=>{var c=ra(),w=v(c),T=v(w),L=v(T,!0);d(T),d(w),d(c),j(()=>{$(c,"href",(a(s),b(()=>`/poets/${a(s).slug}`))),N(L,(a(s),b(()=>a(s).poet_name)))}),m(e,c)}),d(M),R(_,()=>a(t),e=>r(t,e)),G("input",_,X),m(O,z),K()}export{ha as component};
